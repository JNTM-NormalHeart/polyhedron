{"remainingRequest":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\src\\views\\items\\category\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\src\\views\\items\\category\\index.vue","mtime":1703663878000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\babel.config.js","mtime":1703663878000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737137198017},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1737137193353},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737137198017},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1737137194839}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Wang/Desktop/polyhedron/litemall-master/litemall-master/litemall-vue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"C:/Users/Wang/Desktop/polyhedron/litemall-master/litemall-master/litemall-vue/node_modules/@babel/runtime/helpers/defineProperty.js\"));\nrequire(\"vant/es/tabs/style\");\nvar _tabs = _interopRequireDefault(require(\"vant/es/tabs\"));\nrequire(\"vant/es/tab/style\");\nvar _tab = _interopRequireDefault(require(\"vant/es/tab\"));\nrequire(\"vant/es/card/style\");\nvar _card = _interopRequireDefault(require(\"vant/es/card\"));\nrequire(\"core-js/modules/es6.function.name\");\nrequire(\"vant/es/list/style\");\nvar _list = _interopRequireDefault(require(\"vant/es/list\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"C:/Users/Wang/Desktop/polyhedron/litemall-master/litemall-master/litemall-vue/node_modules/@babel/runtime/helpers/toConsumableArray.js\"));\nrequire(\"core-js/modules/es6.regexp.replace\");\nrequire(\"core-js/modules/es6.number.constructor\");\nvar _api = require(\"@/api/api\");\nvar _default = exports.default = {\n  name: 'Item-list',\n  props: {\n    itemClass: {\n      type: [String, Number],\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      categoryId: this.itemClass,\n      goodsList: [],\n      page: 0,\n      limit: 10,\n      currentCategory: {},\n      navList: [],\n      navActive: 0,\n      loading: false,\n      finished: false\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  methods: {\n    handleTabClick: function handleTabClick(index) {\n      this.categoryId = this.navList[index].id;\n      this.$router.replace({\n        name: 'category',\n        query: {\n          itemClass: this.categoryId\n        }\n      });\n      this.init();\n    },\n    init: function init() {\n      var _this = this;\n      (0, _api.goodsCategory)({\n        id: this.categoryId\n      }).then(function (res) {\n        _this.navList = res.data.data.brotherCategory;\n        _this.currentCategory = res.data.data.currentCategory;\n\n        // 当id是L1分类id时，这里需要重新设置成L1分类的一个子分类的id\n        if (res.data.data.parentCategory.id == _this.categoryId) {\n          _this.categoryId = res.data.data.currentCategory.id;\n        }\n        for (var i = 0; i < _this.navList.length; i++) {\n          if (_this.navList[i].id == _this.categoryId) {\n            _this.navActive = i;\n            break;\n          }\n        }\n        _this.page = 0;\n        _this.goodsList = [];\n        _this.getGoodsList();\n      });\n    },\n    getGoodsList: function getGoodsList() {\n      var _this2 = this;\n      this.page++;\n      (0, _api.goodsList)({\n        categoryId: this.categoryId,\n        page: this.page,\n        limit: this.limit\n      }).then(function (res) {\n        var _this2$goodsList;\n        (_this2$goodsList = _this2.goodsList).push.apply(_this2$goodsList, (0, _toConsumableArray2.default)(res.data.data.list));\n        _this2.loading = false;\n        _this2.finished = res.data.data.page >= res.data.data.pages;\n      });\n    },\n    itemClick: function itemClick(id) {\n      this.$router.push(\"/items/detail/\".concat(id));\n    }\n  },\n  components: (0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)({}, _list.default.name, _list.default), _card.default.name, _card.default), _tab.default.name, _tab.default), _tabs.default.name, _tabs.default)\n};",{"version":3,"names":["_api","require","_default","exports","default","name","props","itemClass","type","String","Number","data","categoryId","goodsList","page","limit","currentCategory","navList","navActive","loading","finished","created","init","methods","handleTabClick","index","id","$router","replace","query","_this","goodsCategory","then","res","brotherCategory","parentCategory","i","length","getGoodsList","_this2","_this2$goodsList","push","apply","_toConsumableArray2","list","pages","itemClick","concat","components","_defineProperty2","_list","_card","_tab","_tabs"],"sources":["src/views/items/category/index.vue"],"sourcesContent":["<template>\n  <div class=\"item_list\">\n    <van-tabs v-model=\"navActive\"\n              @click=\"handleTabClick\">\n      <van-tab v-for=\"(nav, index) in navList\"\n               :title=\"nav.name\"\n               :key=\"index\">\n        <van-list v-model=\"loading\"\n                  :finished=\"finished\"\n                  :immediate-check=\"false\"\n                  finished-text=\"没有更多了\"\n                  @load=\"getGoodsList\">\n          <div class=\"h\">\n            <div class=\"name\">{{currentCategory.name}}</div>\n            <div class=\"desc\">{{currentCategory.desc}}</div>\n          </div>\n          <van-card v-for=\"(item, i) in goodsList\"\n                    :key=\"i\"\n                    :desc=\"item.brief\"\n                    :title=\"item.name\"\n                    :thumb=\"item.picUrl\"\n                    :price=\"item.retailPrice\"\n                    :origin-price=\"item.counterPrice\"\n                    @click=\"itemClick(item.id)\" />\n        </van-list>\n\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n\n<script>\nimport { goodsCategory, goodsList } from '@/api/api';\nimport { Card, List, Tab, Tabs } from 'vant';\n\nexport default {\n  name: 'Item-list',\n  props: {\n    itemClass: {\n      type: [String, Number],\n      default: ''\n    }\n  },\n\n  data() {\n    return {\n      categoryId: this.itemClass,\n      goodsList: [],\n      page: 0,\n      limit: 10,\n      currentCategory: {},\n      navList: [],\n      navActive: 0,\n      loading: false,\n      finished: false\n    };\n  },\n\n  created() {\n    this.init();\n  },\n\n  methods: {\n    handleTabClick(index) {\n      this.categoryId = this.navList[index].id;\n      this.$router.replace({\n        name: 'category',\n        query: { itemClass: this.categoryId }\n      });\n      this.init();\n    },\n    init() {\n      goodsCategory({ id: this.categoryId }).then(res => {\n        this.navList = res.data.data.brotherCategory;\n        this.currentCategory = res.data.data.currentCategory;\n\n        // 当id是L1分类id时，这里需要重新设置成L1分类的一个子分类的id\n        if (res.data.data.parentCategory.id == this.categoryId) {\n          this.categoryId = res.data.data.currentCategory.id;\n        }\n\n        for (let i = 0; i < this.navList.length; i++) {\n          if (this.navList[i].id == this.categoryId) {\n            this.navActive = i;\n            break;\n          }\n        }\n        this.page = 0;\n        this.goodsList = [];\n        this.getGoodsList();\n      });\n    },\n    getGoodsList() {\n      this.page++;\n      goodsList({\n        categoryId: this.categoryId,\n        page: this.page,\n        limit: this.limit\n      }).then(res => {\n        this.goodsList.push(...res.data.data.list);\n        this.loading = false;\n        this.finished = res.data.data.page >= res.data.data.pages;\n      });\n    },\n    itemClick(id) {\n      this.$router.push(`/items/detail/${id}`);\n    }\n  },\n\n  components: {\n    [List.name]: List,\n    [Card.name]: Card,\n    [Tab.name]: Tab,\n    [Tabs.name]: Tabs\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.item_list {\n  background-color: #fff;\n}\n\n.h {\n  height: 100px;\n  width: 100%;\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.h .name {\n  display: block;\n  height: 30px;\n  margin-bottom: 10px;\n  font-size: 20px;\n  color: #333;\n}\n\n.h .desc {\n  display: block;\n  height: 24px;\n  font-size: 16px;\n  color: #999;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}