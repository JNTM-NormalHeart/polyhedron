{"remainingRequest":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\src\\views\\login\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\src\\views\\login\\login.vue","mtime":1703663878000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\babel.config.js","mtime":1703663878000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737137198017},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1737137193353},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1737137198017},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1737137194839}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"C:/Users/Wang/Desktop/polyhedron/litemall-master/litemall-master/litemall-vue/node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"C:/Users/Wang/Desktop/polyhedron/litemall-master/litemall-master/litemall-vue/node_modules/@babel/runtime/helpers/defineProperty.js\"));\nrequire(\"vant/es/toast/style\");\nvar _toast = _interopRequireDefault(require(\"vant/es/toast\"));\nrequire(\"core-js/modules/es6.function.name\");\nvar _field = _interopRequireDefault(require(\"@/components/field/\"));\nvar _fieldGroup = _interopRequireDefault(require(\"@/components/field-group/\"));\nvar _api = require(\"@/api/api\");\nvar _localStorage = require(\"@/utils/local-storage\");\nvar _validate = require(\"@/utils/validate\");\nvar _default = exports.default = {\n  name: 'login-request',\n  components: (0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)({}, _field.default.name, _field.default), _fieldGroup.default.name, _fieldGroup.default), \"Toast\", _toast.default),\n  data: function data() {\n    return {\n      account: '',\n      password: '',\n      visiblePass: false,\n      isLogining: false,\n      userInfo: {}\n    };\n  },\n  methods: {\n    clearText: function clearText() {\n      this.account = '';\n    },\n    validate: function validate() {},\n    login: function login() {\n      var _this = this;\n      var loginData = this.getLoginData();\n      (0, _api.authLoginByAccount)(loginData).then(function (res) {\n        _this.userInfo = res.data.data.userInfo;\n        (0, _localStorage.setLocalStorage)({\n          Authorization: res.data.data.token,\n          avatar: _this.userInfo.avatarUrl,\n          nickName: _this.userInfo.nickName\n        });\n        _this.routerRedirect();\n      }).catch(function (error) {\n        _toast.default.fail(error.data.errmsg);\n      });\n    },\n    loginSubmit: function loginSubmit() {\n      this.isLogining = true;\n      try {\n        this.validate();\n        this.login();\n        this.isLogining = false;\n      } catch (err) {\n        console.log(err.message);\n        this.isLogining = false;\n      }\n    },\n    routerRedirect: function routerRedirect() {\n      // const { query } = this.$route;\n      // this.$router.replace({\n      //   name: query.redirect || 'home',\n      //   query: query\n      // });\n      window.location = '#/user/';\n    },\n    getLoginData: function getLoginData() {\n      var password = this.password;\n      var account = this.getUserType(this.account);\n      return (0, _defineProperty2.default)((0, _defineProperty2.default)({}, account, this.account), \"password\", password);\n    },\n    getUserType: function getUserType(account) {\n      var accountType = _validate.mobileReg.test(account) ? 'mobile' : _validate.emailReg.test(account) ? 'email' : 'username';\n      return accountType;\n    }\n  }\n};",{"version":3,"names":["_field","_interopRequireDefault","require","_fieldGroup","_api","_localStorage","_validate","_default","exports","default","name","components","_defineProperty2","field","fieldGroup","_toast","data","account","password","visiblePass","isLogining","userInfo","methods","clearText","validate","login","_this","loginData","getLoginData","authLoginByAccount","then","res","setLocalStorage","Authorization","token","avatar","avatarUrl","nickName","routerRedirect","catch","error","fail","errmsg","loginSubmit","err","console","log","message","window","location","getUserType","accountType","mobileReg","test","emailReg"],"sources":["src/views/login/login.vue"],"sourcesContent":["<template>\n\t<div class=\"login\">\n    \t<div class=\"store_header\">\n\t\t<div class=\"store_avatar\">\n\t\t\t<img src=\"../../assets/images/avatar_default.png\" alt=\"头像\" width=\"55\" height=\"55\">\n\t\t</div>\n\t\t<div class=\"store_name\">litemall-vue</div>\n\t</div>\n\n    <md-field-group>\n      <md-field\n        v-model=\"account\"\n        icon=\"username\"\n        placeholder=\"请输入测试账号 user123\"\n        right-icon=\"clear-full\"\n        name=\"user\"\n        data-vv-as=\"帐号\"\n        @right-click=\"clearText\"\n      />\n\n      <md-field\n        v-model=\"password\"\n        icon=\"lock\"\n        placeholder=\"请输入测试密码 user123\"\n        :type=\"visiblePass ? 'text' : 'password'\"\n        :right-icon=\"visiblePass ? 'eye-open' : 'eye-close'\"\n        data-vv-as=\"密码\"\n        name=\"password\"\n        @right-click=\"visiblePass = !visiblePass\"\n      />\n\n      <div class=\"clearfix\">\n        <div class=\"float-l\">\n          <router-link to=\"/login/registerGetCode\">免费注册</router-link>\n        </div>\n        <div class=\"float-r\">\n          <router-link to=\"/login/forget\">忘记密码</router-link>\n        </div>\n      </div>\n\n      <van-button size=\"large\" type=\"danger\" :loading=\"isLogining\" @click=\"loginSubmit\">登录</van-button>\n    </md-field-group>\n\n\n      <div class=\"text-desc text-center bottom_positon\">技术支持: litemall</div>\n\n\t</div>\n</template>\n\n<script>\nimport field from '@/components/field/';\nimport fieldGroup from '@/components/field-group/';\n\nimport { authLoginByAccount } from '@/api/api';\nimport { setLocalStorage } from '@/utils/local-storage';\nimport { emailReg, mobileReg } from '@/utils/validate';\n\nimport { Toast } from 'vant';\n\n\nexport default {\n  name: 'login-request',\n  components: {\n    [field.name]: field,\n    [fieldGroup.name]: fieldGroup,\n    Toast\n  },\n  data() {\n    return {\n      account: '',\n      password: '',\n      visiblePass: false,\n      isLogining: false,\n      userInfo: {}\n    };\n  },\n\n  methods: {\n    clearText() {\n      this.account = '';\n    },\n\n    validate() {\n\n    },\n\n    login() {\n      let loginData = this.getLoginData();\n      authLoginByAccount(loginData).then(res => {\n        this.userInfo = res.data.data.userInfo;\n        setLocalStorage({\n          Authorization: res.data.data.token,\n          avatar: this.userInfo.avatarUrl,\n          nickName: this.userInfo.nickName\n        });\n\n        this.routerRedirect();\n      }).catch(error => {\n        Toast.fail(error.data.errmsg);\n      });\n    },\n\n    loginSubmit() {\n      this.isLogining = true;\n      try {\n        this.validate();\n        this.login();\n        this.isLogining = false;\n      } catch (err) {\n        console.log(err.message);\n        this.isLogining = false;\n      }\n    },\n\n    routerRedirect() {\n      // const { query } = this.$route;\n      // this.$router.replace({\n      //   name: query.redirect || 'home',\n      //   query: query\n      // });\n      window.location = '#/user/';\n    },\n\n    getLoginData() {\n      const password = this.password;\n      const account = this.getUserType(this.account);\n      return {\n        [account]: this.account,\n        password: password\n      };\n    },\n\n    getUserType(account) {\n      const accountType = mobileReg.test(account)\n        ? 'mobile'\n        : emailReg.test(account)\n        ? 'email'\n        : 'username';\n      return accountType;\n    }\n  }\n};\n</script>\n\n\n<style lang=\"scss\" scoped>\n@import '../../assets/scss/mixin';\n.login {\n  position: relative;\n  background-color: #fff;\n}\n.store_header {\n  text-align: center;\n  padding: 30px 0;\n  .store_avatar img {\n    border-radius: 50%;\n  }\n  .store_name {\n    padding-top: 5px;\n    font-size: 16px;\n  }\n}\n.register {\n  padding-top: 40px;\n  color: $font-color-gray;\n  a {\n    color: $font-color-gray;\n  }\n  > div {\n    width: 50%;\n    box-sizing: border-box;\n    padding: 0 20px;\n  }\n  .connect {\n    @include one-border(right);\n    text-align: right;\n  }\n}\n.bottom_positon {\n  position: absolute;\n  bottom: 30px;\n  width: 100%;\n}\n</style>\n"],"mappings":";;;;;;;;;;;AAkDA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAAE,IAAA,GAAAF,OAAA;AACA,IAAAG,aAAA,GAAAH,OAAA;AACA,IAAAI,SAAA,GAAAJ,OAAA;AAAA,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAKA;EACAC,IAAA;EACAC,UAAA,MAAAC,gBAAA,CAAAH,OAAA,MAAAG,gBAAA,CAAAH,OAAA,MAAAG,gBAAA,CAAAH,OAAA,MACAI,cAAA,CAAAH,IAAA,EAAAG,cAAA,GACAC,mBAAA,CAAAJ,IAAA,EAAAI,mBAAA,YAAAC,MAAA,CAAAN,OAAA,CAEA;EACAO,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,WAAA;MACAC,UAAA;MACAC,QAAA;IACA;EACA;EAEAC,OAAA;IACAC,SAAA,WAAAA,UAAA;MACA,KAAAN,OAAA;IACA;IAEAO,QAAA,WAAAA,SAAA,GAEA;IAEAC,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MACA,IAAAC,SAAA,QAAAC,YAAA;MACA,IAAAC,uBAAA,EAAAF,SAAA,EAAAG,IAAA,WAAAC,GAAA;QACAL,KAAA,CAAAL,QAAA,GAAAU,GAAA,CAAAf,IAAA,CAAAA,IAAA,CAAAK,QAAA;QACA,IAAAW,6BAAA;UACAC,aAAA,EAAAF,GAAA,CAAAf,IAAA,CAAAA,IAAA,CAAAkB,KAAA;UACAC,MAAA,EAAAT,KAAA,CAAAL,QAAA,CAAAe,SAAA;UACAC,QAAA,EAAAX,KAAA,CAAAL,QAAA,CAAAgB;QACA;QAEAX,KAAA,CAAAY,cAAA;MACA,GAAAC,KAAA,WAAAC,KAAA;QACAzB,MAAA,CAAAN,OAAA,CAAAgC,IAAA,CAAAD,KAAA,CAAAxB,IAAA,CAAA0B,MAAA;MACA;IACA;IAEAC,WAAA,WAAAA,YAAA;MACA,KAAAvB,UAAA;MACA;QACA,KAAAI,QAAA;QACA,KAAAC,KAAA;QACA,KAAAL,UAAA;MACA,SAAAwB,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA,CAAAG,OAAA;QACA,KAAA3B,UAAA;MACA;IACA;IAEAkB,cAAA,WAAAA,eAAA;MACA;MACA;MACA;MACA;MACA;MACAU,MAAA,CAAAC,QAAA;IACA;IAEArB,YAAA,WAAAA,aAAA;MACA,IAAAV,QAAA,QAAAA,QAAA;MACA,IAAAD,OAAA,QAAAiC,WAAA,MAAAjC,OAAA;MACA,WAAAL,gBAAA,CAAAH,OAAA,MAAAG,gBAAA,CAAAH,OAAA,MACAQ,OAAA,OAAAA,OAAA,eACAC,QAAA;IAEA;IAEAgC,WAAA,WAAAA,YAAAjC,OAAA;MACA,IAAAkC,WAAA,GAAAC,mBAAA,CAAAC,IAAA,CAAApC,OAAA,IACA,WACAqC,kBAAA,CAAAD,IAAA,CAAApC,OAAA,IACA,UACA;MACA,OAAAkC,WAAA;IACA;EACA;AACA","ignoreList":[]}]}