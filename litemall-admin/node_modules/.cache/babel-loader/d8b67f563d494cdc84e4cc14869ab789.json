{"remainingRequest":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\src\\store\\modules\\permission.js","dependencies":[{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\src\\store\\modules\\permission.js","mtime":1703663872000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\babel.config.js","mtime":1703663870000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\Wang\\Desktop\\polyhedron\\litemall-master\\litemall-master\\litemall-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9XYW5nL0Rlc2t0b3AvcG9seWhlZHJvbi9saXRlbWFsbC1tYXN0ZXIvbGl0ZW1hbGwtbWFzdGVyL2xpdGVtYWxsLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX29iamVjdFNwcmVhZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkM6L1VzZXJzL1dhbmcvRGVza3RvcC9wb2x5aGVkcm9uL2xpdGVtYWxsLW1hc3Rlci9saXRlbWFsbC1tYXN0ZXIvbGl0ZW1hbGwtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0U3ByZWFkMi5qcyIpKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwp2YXIgX3JvdXRlciA9IHJlcXVpcmUoIkAvcm91dGVyIik7Ci8qKgogKiDpgJrov4dtZXRhLnBlcm1z5Yik5pat5piv5ZCm5LiO5b2T5YmN55So5oi35p2D6ZmQ5Yy56YWNCiAqIEBwYXJhbSBwZXJtcwogKiBAcGFyYW0gcm91dGUKICovCmZ1bmN0aW9uIGhhc1Blcm1pc3Npb24ocGVybXMsIHJvdXRlKSB7CiAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5wZXJtcykgewogICAgcmV0dXJuIHBlcm1zLnNvbWUoZnVuY3Rpb24gKHBlcm0pIHsKICAgICAgcmV0dXJuIHJvdXRlLm1ldGEucGVybXMuaW5jbHVkZXMocGVybSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9CgovKioKICog6YCS5b2S6L+H5ruk5byC5q2l6Lev55Sx6KGo77yM6L+U5Zue56ym5ZCI55So5oi36KeS6Imy5p2D6ZmQ55qE6Lev55Sx6KGoCiAqIEBwYXJhbSByb3V0ZXMgYXN5bmNSb3V0ZXMKICogQHBhcmFtIHBlcm1zCiAqLwpmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcyhyb3V0ZXMsIHBlcm1zKSB7CiAgdmFyIHJlcyA9IFtdOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIHRtcCA9ICgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgcm91dGUpOwogICAgaWYgKHRtcC5jaGlsZHJlbikgewogICAgICB0bXAuY2hpbGRyZW4gPSBmaWx0ZXJBc3luY1JvdXRlcyh0bXAuY2hpbGRyZW4sIHBlcm1zKTsKICAgICAgaWYgKHRtcC5jaGlsZHJlbiAmJiB0bXAuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgIHJlcy5wdXNoKHRtcCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChoYXNQZXJtaXNzaW9uKHBlcm1zLCB0bXApKSB7CiAgICAgICAgcmVzLnB1c2godG1wKTsKICAgICAgfQogICAgfQogIH0pOwogIHJldHVybiByZXM7Cn0KdmFyIHBlcm1pc3Npb24gPSB7CiAgc3RhdGU6IHsKICAgIHJvdXRlczogX3JvdXRlci5jb25zdGFudFJvdXRlcywKICAgIGFkZFJvdXRlczogW10KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1JPVVRFUzogZnVuY3Rpb24gU0VUX1JPVVRFUyhzdGF0ZSwgcm91dGVzKSB7CiAgICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgICAgc3RhdGUucm91dGVzID0gX3JvdXRlci5jb25zdGFudFJvdXRlcy5jb25jYXQocm91dGVzKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIEdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBHZW5lcmF0ZVJvdXRlcyhfcmVmLCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIHBlcm1zID0gZGF0YS5wZXJtczsKICAgICAgICB2YXIgYWNjZXNzZWRSb3V0ZXM7CiAgICAgICAgaWYgKHBlcm1zLmluY2x1ZGVzKCcqJykpIHsKICAgICAgICAgIGFjY2Vzc2VkUm91dGVzID0gX3JvdXRlci5hc3luY1JvdXRlczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWNjZXNzZWRSb3V0ZXMgPSBmaWx0ZXJBc3luY1JvdXRlcyhfcm91dGVyLmFzeW5jUm91dGVzLCBwZXJtcyk7CiAgICAgICAgfQogICAgICAgIGNvbW1pdCgnU0VUX1JPVVRFUycsIGFjY2Vzc2VkUm91dGVzKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gcGVybWlzc2lvbjs="},{"version":3,"names":["_router","require","hasPermission","perms","route","meta","some","perm","includes","filterAsyncRoutes","routes","res","forEach","tmp","_objectSpread2","default","children","length","push","permission","state","constantRoutes","addRoutes","mutations","SET_ROUTES","concat","actions","GenerateRoutes","_ref","data","commit","Promise","resolve","accessedRoutes","asyncRoutes","_default","exports"],"sources":["C:/Users/Wang/Desktop/polyhedron/litemall-master/litemall-master/litemall-admin/src/store/modules/permission.js"],"sourcesContent":["import { asyncRoutes, constantRoutes } from '@/router'\n\n/**\n * 通过meta.perms判断是否与当前用户权限匹配\n * @param perms\n * @param route\n */\nfunction hasPermission(perms, route) {\n  if (route.meta && route.meta.perms) {\n    return perms.some(perm => route.meta.perms.includes(perm))\n  } else {\n    return true\n  }\n}\n\n/**\n * 递归过滤异步路由表，返回符合用户角色权限的路由表\n * @param routes asyncRoutes\n * @param perms\n */\nfunction filterAsyncRoutes(routes, perms) {\n  const res = []\n\n  routes.forEach(route => {\n    const tmp = { ...route }\n    if (tmp.children) {\n      tmp.children = filterAsyncRoutes(tmp.children, perms)\n      if (tmp.children && tmp.children.length > 0) {\n        res.push(tmp)\n      }\n    } else {\n      if (hasPermission(perms, tmp)) {\n        res.push(tmp)\n      }\n    }\n  })\n\n  return res\n}\n\nconst permission = {\n  state: {\n    routes: constantRoutes,\n    addRoutes: []\n  },\n  mutations: {\n    SET_ROUTES: (state, routes) => {\n      state.addRoutes = routes\n      state.routes = constantRoutes.concat(routes)\n    }\n  },\n  actions: {\n    GenerateRoutes({ commit }, data) {\n      return new Promise(resolve => {\n        const { perms } = data\n        let accessedRoutes\n        if (perms.includes('*')) {\n          accessedRoutes = asyncRoutes\n        } else {\n          accessedRoutes = filterAsyncRoutes(asyncRoutes, perms)\n        }\n        commit('SET_ROUTES', accessedRoutes)\n        resolve()\n      })\n    }\n  }\n}\n\nexport default permission\n"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA,SAASC,aAAaA,CAACC,KAAK,EAAEC,KAAK,EAAE;EACnC,IAAIA,KAAK,CAACC,IAAI,IAAID,KAAK,CAACC,IAAI,CAACF,KAAK,EAAE;IAClC,OAAOA,KAAK,CAACG,IAAI,CAAC,UAAAC,IAAI;MAAA,OAAIH,KAAK,CAACC,IAAI,CAACF,KAAK,CAACK,QAAQ,CAACD,IAAI,CAAC;IAAA,EAAC;EAC5D,CAAC,MAAM;IACL,OAAO,IAAI;EACb;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASE,iBAAiBA,CAACC,MAAM,EAAEP,KAAK,EAAE;EACxC,IAAMQ,GAAG,GAAG,EAAE;EAEdD,MAAM,CAACE,OAAO,CAAC,UAAAR,KAAK,EAAI;IACtB,IAAMS,GAAG,OAAAC,cAAA,CAAAC,OAAA,MAAQX,KAAK,CAAE;IACxB,IAAIS,GAAG,CAACG,QAAQ,EAAE;MAChBH,GAAG,CAACG,QAAQ,GAAGP,iBAAiB,CAACI,GAAG,CAACG,QAAQ,EAAEb,KAAK,CAAC;MACrD,IAAIU,GAAG,CAACG,QAAQ,IAAIH,GAAG,CAACG,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;QAC3CN,GAAG,CAACO,IAAI,CAACL,GAAG,CAAC;MACf;IACF,CAAC,MAAM;MACL,IAAIX,aAAa,CAACC,KAAK,EAAEU,GAAG,CAAC,EAAE;QAC7BF,GAAG,CAACO,IAAI,CAACL,GAAG,CAAC;MACf;IACF;EACF,CAAC,CAAC;EAEF,OAAOF,GAAG;AACZ;AAEA,IAAMQ,UAAU,GAAG;EACjBC,KAAK,EAAE;IACLV,MAAM,EAAEW,sBAAc;IACtBC,SAAS,EAAE;EACb,CAAC;EACDC,SAAS,EAAE;IACTC,UAAU,EAAE,SAAAA,WAACJ,KAAK,EAAEV,MAAM,EAAK;MAC7BU,KAAK,CAACE,SAAS,GAAGZ,MAAM;MACxBU,KAAK,CAACV,MAAM,GAAGW,sBAAc,CAACI,MAAM,CAACf,MAAM,CAAC;IAC9C;EACF,CAAC;EACDgB,OAAO,EAAE;IACPC,cAAc,WAAAA,eAAAC,IAAA,EAAaC,IAAI,EAAE;MAAA,IAAhBC,MAAM,GAAAF,IAAA,CAANE,MAAM;MACrB,OAAO,IAAIC,OAAO,CAAC,UAAAC,OAAO,EAAI;QAC5B,IAAQ7B,KAAK,GAAK0B,IAAI,CAAd1B,KAAK;QACb,IAAI8B,cAAc;QAClB,IAAI9B,KAAK,CAACK,QAAQ,CAAC,GAAG,CAAC,EAAE;UACvByB,cAAc,GAAGC,mBAAW;QAC9B,CAAC,MAAM;UACLD,cAAc,GAAGxB,iBAAiB,CAACyB,mBAAW,EAAE/B,KAAK,CAAC;QACxD;QACA2B,MAAM,CAAC,YAAY,EAAEG,cAAc,CAAC;QACpCD,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ;EACF;AACF,CAAC;AAAA,IAAAG,QAAA,GAAAC,OAAA,CAAArB,OAAA,GAEcI,UAAU"}]}